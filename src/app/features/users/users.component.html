<div class="page">

  <!-- ğŸŒŒ Background -->
  <div class="bg"></div>
  <div class="orb orb1"></div>
  <div class="orb orb2"></div>

  <div class="wrap">

    <!-- HEADER -->
    <div class="header">
      <div class="hLeft">
        <h2>ğŸ‘¥ Users</h2>
        <p class="sub">Manage Chatloop accounts (edit / delete)</p>
      </div>

      <div class="searchWrap">
        <span class="ico">ğŸ”</span>
        <input
          class="search"
          placeholder="Search by name / email / phone..."
          [(ngModel)]="searchText"
          (input)="onSearch()"
        />
      </div>
    </div>

    <!-- LOADING -->
    <div *ngIf="loading" class="loadingCard">
      <div class="spinner"></div>
      <div class="loadingText">Loading users...</div>
    </div>

    <!-- GRID -->
    <div class="grid" *ngIf="!loading">

      <!-- USERS LIST -->
      <div class="card listCard">
        <div class="cardTop">
          <h3>All Users</h3>
          <div class="pill">{{ filtered.length }}</div>
        </div>

        <div class="userList">

          <div class="userRow" *ngFor="let u of filtered">
            <div class="left" (click)="openDetails(u)">
              <div class="avatar">
                {{ (u.name || u.email || 'U').slice(0,1).toUpperCase() }}
              </div>

              <div class="info">
                <div class="name">{{ u.name || 'Unnamed' }}</div>
                <div class="sub2">{{ u.email || u.phone || 'No Email / Phone' }}</div>
              </div>
            </div>

            <div class="actions">
              <button class="btn ghost" (click)="openEdit(u)">âœ Edit</button>
              <button class="btn danger" (click)="deleteUser(u)">ğŸ—‘ Delete</button>
            </div>
          </div>

          <div class="empty" *ngIf="filtered.length === 0">
            <div class="emoji">ğŸ‘¤</div>
            <div class="t1">No users found</div>
            <div class="t2">Try another search keyword</div>
          </div>

        </div>
      </div>

      <!-- DETAILS -->
      <div class="card" *ngIf="selectedUser">
        <div class="cardTop">
          <h3>ğŸ“Œ User Details</h3>
          <button class="xBtn" (click)="closeDetails()">âœ–</button>
        </div>

        <div class="detail">
          <div class="row">
            <span>UID</span>
            <b class="mono">{{ selectedUser.uid }}</b>
          </div>

          <div class="row">
            <span>Name</span>
            <b>{{ selectedUser.name || '-' }}</b>
          </div>

          <div class="row">
            <span>Email</span>
            <b>{{ selectedUser.email || '-' }}</b>
          </div>

          <div class="row">
            <span>Phone</span>
            <b>{{ selectedUser.phone || '-' }}</b>
          </div>
        </div>

        <button class="btn full ghost" (click)="closeDetails()">Close</button>
      </div>

      <!-- EDIT -->
      <div class="card" *ngIf="editUser">
        <div class="cardTop">
          <h3>âœ Edit User</h3>
          <button class="xBtn" (click)="closeEdit()">âœ–</button>
        </div>

        <div class="form">
          <label>Name</label>
          <input [(ngModel)]="editUser.name" placeholder="Enter name" />

          <label>Email</label>
          <input [(ngModel)]="editUser.email" placeholder="Enter email" />

          <label>Phone</label>
          <input [(ngModel)]="editUser.phone" placeholder="Enter phone" />
        </div>

        <div class="rowBtns">
          <button class="btn full primary" (click)="saveEdit()">âœ… Save</button>
          <button class="btn full ghost" (click)="closeEdit()">Cancel</button>
        </div>
      </div>

    </div>

  </div>
</div>
