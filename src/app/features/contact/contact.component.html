<!-- Header -->
<div class="header">
  <div>
    <div class="title">Contacts</div>
    <div class="subtitle">{{ filtered.length }} saved contacts</div>
  </div>

  <div class="header-actions">
    <button class="btn ghost" (click)="openScanner()">ðŸ“· Scan QR</button>
    <button class="btn primary" (click)="openAdd()">âž• Add</button>
  </div>
</div>

<!-- âœ… QR Scanner Modal -->
<div class="modal" *ngIf="showScanner" (click)="closeScanner()">
  <div class="box scanner-box" (click)="$event.stopPropagation()">
    <div class="mTitle">ðŸ“· Scan QR</div>
    <div class="mSub">Scan Chatloop QR / URL</div>

    <div class="scanner">
      <div id="qr-reader"></div>
    </div>

    <div class="actions2">
      <button class="btn ghost" (click)="closeScanner()">Close</button>
    </div>
  </div>
</div>

<!-- âœ… SCAN RESULT -->
<div class="modal" *ngIf="showScanResult" (click)="closeScanResult()">
  <div class="box result-box" (click)="$event.stopPropagation()">
    <div class="mTitle">âœ… User Found</div>
    <div class="mSub">Add friend or open chat</div>

    <div class="result-user" *ngIf="scannedUser as u">
      <div class="avatar">{{ (u.name || 'U')[0] }}</div>
      <div class="meta">
        <div class="name">{{ u.name || 'User' }}</div>
        <div class="uid">UID: <span>{{ u.uid }}</span></div>
      </div>
    </div>

    <div class="actions2">
      <button class="btn ghost" (click)="closeScanResult()">Cancel</button>
      <button class="btn ghost" (click)="addFriendFromScan()">âž• Add Friend</button>
      <button class="btn primary" (click)="openChatFromScan()">ðŸ’¬ Open Chat</button>
    </div>
  </div>
</div>
