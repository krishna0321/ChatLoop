<div class="page">

  <div class="top">
    <a class="back" [routerLink]="['/app/group', roomId, 'info']">â¬… Info</a>
    <div>
      <div class="title">Add Members</div>
      <div class="sub">Search and add users into group</div>
    </div>
  </div>

  <div class="card">

    <div class="searchRow">
      <span class="ico">ğŸ”</span>
      <input [(ngModel)]="search" (input)="apply()" placeholder="Search user..." />
    </div>

    <div class="list">
      <div
        class="user"
        *ngFor="let u of filtered"
        [class.sel]="isSelected(u.uid)"
        (click)="toggle(u.uid)"
      >
        <div class="av">{{ getInitial(u) }}</div>
        <div class="meta">
          <div class="name">{{ u.name || u.email || 'User' }}</div>
          <div class="sub">{{ u.email || u.phone || '' }}</div>
        </div>

        <div class="check">{{ isSelected(u.uid) ? 'âœ…' : 'â•' }}</div>
      </div>

      <div class="empty" *ngIf="filtered.length === 0 && !loading">
        No users available
      </div>
    </div>

    <p class="err" *ngIf="err">{{ err }}</p>

    <button class="primary" (click)="add()" [disabled]="saving">
      {{ saving ? 'Adding...' : 'âœ… Add Members' }}
    </button>

  </div>

</div>
