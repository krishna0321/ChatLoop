<div class="chatListWrap">

  <!-- âœ… HEADER -->
  <div class="listHeader">
    <div class="headerTitle">
      Chats
      <span class="count">{{ chats.length }}</span>
    </div>

    <div class="headerActions">
      <a [routerLink]="['/app/create-room']">âž•</a>
    </div>
  </div>

  <!-- âœ… LOADING -->
  <div class="loadingBox" *ngIf="loading">
    <div class="spinner"></div>
    <div class="loadingText">Loading chats...</div>
  </div>

  <!-- âœ… EMPTY STATE -->
  <div *ngIf="!loading && chats.length === 0" class="emptyState">
    <div class="emoji">ðŸ’¬</div>
    <h3>No chats yet</h3>
    <p>
      You are new here ðŸ˜„ <br />
      Start chatting with someone!
    </p>

    <button class="startBtn" routerLink="/users">
      âž• Start New Chat
    </button>

    <div class="tip">
      Tip: Go to <b>Users</b> page and click on any user to start chat.
    </div>
  </div>

  <!-- âœ… CHAT LIST -->
  <div *ngIf="!loading && chats.length > 0" class="chatList">
    <a
      class="chatItem"
      *ngFor="let c of chats; trackBy: trackByChatId"
      [routerLink]="['/chat', c.id]"
    >
      <div class="avatar">
        {{ iconByType(c.type) }}
      </div>

      <div class="info">
        <div class="titleRow">
          <div class="title">{{ c.title }}</div>

          <span
            class="type"
            [class.dm]="c.type==='dm'"
            [class.group]="c.type==='group'"
            [class.channel]="c.type==='channel'"
          >
            {{ c.type }}
          </span>
        </div>

        <div class="subtitle">
          {{ c.lastMessage || 'No messages yet...' }}
        </div>
      </div>

      <!-- âœ… unread badge -->
      <div class="unread" *ngIf="c.unread > 0">
        {{ c.unread }}
      </div>
    </a>
  </div>

</div>
